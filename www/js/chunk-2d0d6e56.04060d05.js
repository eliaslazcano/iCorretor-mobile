(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d6e56"],{7502:function(a,t,s){"use strict";s.r(t);var e=function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",[a.$store.state.assinatura&&null===a.assinatura?s("div",{staticClass:"card"},[a._m(0),s("div",{staticClass:"card-body"},[s("div",{staticClass:"text-center"},[s("p",[a._v("Sua assinatura atual:")]),s("img",{staticClass:"img-fluid d-block mx-auto",staticStyle:{"max-height":"16rem"},attrs:{src:a.$store.state.assinatura,alt:""}})])]),s("div",{staticClass:"card-footer"},[s("button",{staticClass:"btn btn-block mx-0 my-1 btn-info",on:{click:function(t){a.assinatura=!1}}},[a._v("TROCAR ASSINATURA")]),s("button",{staticClass:"btn btn-block mx-0 my-1 btn-success",on:{click:a.reusarAssinatura}},[a._v("CONTINUAR COM A ASSINATURA ATUAL")]),s("router-link",{staticClass:"btn btn-block btn-secondary",attrs:{to:{name:"recad-form-foto"}}},[a._v("VOLTAR")])],1)]):!1===a.assinatura?s("div",{staticClass:"card"},[a._m(1),a._m(2),s("div",{staticClass:"card-footer"},[s("button",{staticClass:"btn btn-block mx-0 btn-primary",on:{click:a.inserirImagem}},[s("i",{staticClass:"fas fa-camera pr-1"}),a._v("FOTOGRAFIA DA ASSINATURA\n      ")]),s("button",{staticClass:"btn btn-block mx-0 btn-warning",on:{click:function(){a.$jquery(a.$refs.coletor).modal("show"),a.$refs.pad.resizeCanvas()}}},[s("i",{staticClass:"fas fa-signature pr-1"}),a._v("ASSINAR NA TELA\n      ")]),a.$store.state.assinatura?s("button",{staticClass:"btn btn-block mx-0 btn-secondary",on:{click:function(t){a.assinatura=null}}},[a._v("VOLTAR")]):a._e()])]):a.assinatura?s("div",{staticClass:"card"},[a._m(3),s("div",{staticClass:"card-body"},[s("img",{staticClass:"img-fluid d-block mx-auto",staticStyle:{"max-height":"16rem"},attrs:{src:a.assinatura,alt:""}})]),s("div",{staticClass:"card-footer"},[s("button",{staticClass:"btn btn-block btn-primary mx-0",on:{click:a.confirmarFinalizacao}},[a._v("FINALIZAR")]),s("button",{staticClass:"btn btn-block btn-secondary mx-0",on:{click:function(t){a.assinatura=!!a.$store.state.assinatura&&null}}},[a._v("VOLTAR")])])]):a._e(),s("div",{ref:"coletor",staticClass:"modal",attrs:{tabindex:"-1",role:"dialog"}},[s("div",{staticClass:"modal-dialog mw-100 my-0",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-body p-2"},[a._m(4),s("VueSignaturePad",{ref:"pad",staticClass:"border border-danger",attrs:{height:"76vh",width:"100%"}}),s("div",{staticClass:"text-center mt-2"},[s("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(t){return a.$refs.pad.clearSignature()}}},[s("i",{staticClass:"fas fa-eraser pr-1"}),a._v("Tentar novamente\n            ")]),s("div",{staticClass:"mt-2"},[a._m(5),s("button",{staticClass:"btn btn-success ml-2",attrs:{type:"button"},on:{click:a.coletarAssinatura}},[s("i",{staticClass:"fas fa-check pr-1"}),a._v("Confirmar\n              ")])])])],1)])])]),s("div",{ref:"capturar-imagem",staticClass:"modal",attrs:{tabindex:"-1",role:"dialog"}},[s("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-body"},[s("button",{staticClass:"btn btn-block btn-lg btn-success",on:{click:function(){a.$jquery(a.$refs["capturar-imagem"]).modal("hide"),a.capturarImagem_Mobile(!1)}}},[s("i",{staticClass:"fas fa-camera pr-2"}),a._v("Câmera")]),s("button",{staticClass:"btn btn-block btn-lg btn-warning",on:{click:function(){a.$jquery(a.$refs["capturar-imagem"]).modal("hide"),a.capturarImagem_Mobile(!0)}}},[s("i",{staticClass:"fas fa-images pr-2"}),a._v("Galeria")])])])])]),s("div",{ref:"rasterizador",staticClass:"modal",attrs:{tabindex:"-1",role:"dialog"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[a._m(6),s("div",{staticClass:"modal-body p-2"},[a._m(7),s("img",{staticClass:"w-100 bg-success mb-3",attrs:{src:a.rasterizacao_img,alt:""}}),a._m(8),s("input",{directives:[{name:"model",rawName:"v-model.number.lazy",value:a.rasterizacao_level,expression:"rasterizacao_level",modifiers:{number:!0,lazy:!0}}],staticClass:"custom-range",attrs:{id:"ipt-range",type:"range",min:"-25",max:"-1"},domProps:{value:a.rasterizacao_level},on:{change:function(t){a.rasterizacao_level=a._n(t.target.value)},blur:function(t){return a.$forceUpdate()}}})]),s("div",{staticClass:"modal-footer justify-content-center"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:a.confirmarAssinaturaUpada}},[a._v("Confirmar")]),s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[a._v("Cancelar")])])])])]),s("input",{ref:"file",staticClass:"d-none",attrs:{id:"ipt-file",type:"file",accept:"image/jpeg, image/png"},on:{input:a.onInput}}),s("div",{ref:"confirm",staticClass:"modal",attrs:{tabindex:"-1",role:"dialog"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[a._m(9),a._m(10),s("div",{staticClass:"modal-footer justify-content-center bg-light py-2"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[a._v("Cancelar")]),s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:a.finalizar}},[a._v("Confirmar")])])])])])])},r=[function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"card-header"},[s("h5",{staticClass:"card-title"},[a._v("Assinatura")])])},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"card-header"},[s("h5",{staticClass:"card-title"},[a._v("Nova assinatura")])])},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"card-body"},[s("p",[a._v("Há duas formas de capturar sua assinatura:")]),s("ul",{staticClass:"ml-3"},[s("li",[s("strong",[a._v("Fotografia")]),a._v(": Envie uma foto da sua assinatura em uma folha de papel branca. Não deixe aparecer nada além do papel, por exemplo a mesa. "),s("span",{staticClass:"text-danger"},[a._v("Não")]),a._v(" pode haver sombras, "),s("span",{staticClass:"text-danger"},[a._v("não")]),a._v(" tire foto escura, "),s("span",{staticClass:"text-danger"},[a._v("não")]),a._v(" use FLASH.\n        ")]),s("li",[s("strong",[a._v("Assinar na tela")]),a._v(": Se a tela for touchscreen (sensível ao toque), você pode assinar com seu "),s("u",[a._v("dedo")]),a._v(". Ou então com a ajuda de um "),s("u",[a._v("mouse")]),a._v(" ou uma "),s("u",[a._v("caneta")]),a._v(" específica para telas.\n        ")])])])},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"card-header"},[s("h5",{staticClass:"card-title"},[a._v("Assinatura")])])},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("p",{staticClass:"mb-2"},[a._v("Assine dentro do retângulo vermelho."),s("br"),a._v("Não gire a tela depois que assinar.")])},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-dismiss":"modal"}},[s("i",{staticClass:"fas fa-long-arrow-alt-left pr-1"}),a._v("Cancelar\n              ")])},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"modal-header py-2"},[s("h5",{staticClass:"modal-title"},[a._v("Remoção do fundo")])])},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("p",{staticClass:"text-justify"},[a._v("Você precisa apagar o fundo da imagem. Para isso, ajuste a "),s("strong",[a._v("potência do apagador")]),a._v(" deixando o fundo "),s("span",{staticClass:"text-success"},[a._v("verde")]),a._v(" mas sem prejudicar sua rúbrica. A cor "),s("span",{staticClass:"text-success"},[a._v("verde")]),a._v(" representa a região que será apagada, tornando-se transparente.")])},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("label",{staticClass:"d-block text-center",attrs:{for:"ipt-range"}},[s("i",{staticClass:"fas fa-eraser pr-2"}),a._v("Potência do apagador")])},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"modal-header py-2 bg-light"},[s("h5",{staticClass:"modal-title"},[a._v("Finalizar o recadastramento?")])])},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"modal-body d-flex align-items-center"},[s("i",{staticClass:"fas fa-exclamation-circle fa-3x text-danger"}),s("p",{staticClass:"text-justify mb-0 ml-3"},[a._v("Ao confirmar, você declara estar de inteira responsabilidade pelas informações prestadas, estando ciente de que a falsidade nas informações apresentadas implicará nas penalidades cabíveis.")])])}],i=(s("96cf"),s("3b8d")),n=s("c762"),o={name:"Assinatura",data:function(){return{assinatura:null,rasterizacao_level:-20,rasterizacao_img:null,rasterizacao_img_original:null}},methods:{reusarAssinatura:function(){var a=Object(i["a"])(regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,this.$loadImageAsync(this.$store.state.assinatura,{maxWidth:1280,maxHeight:720,canvas:!0,orientation:!0});case 2:t=a.sent,t=n["a"].removerCorDeFundo(t,[200,200,200]),t=n["a"].trimTransparentBackground(t),this.assinatura=t.toDataURL("image/png"),this.confirmarFinalizacao();case 7:case"end":return a.stop()}}),a,this)})));function t(){return a.apply(this,arguments)}return t}(),coletarAssinatura:function(){var a=Object(i["a"])(regeneratorRuntime.mark((function a(){var t,s,e,r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t=this.$refs.pad.saveSignature(),s=t.isEmpty,e=t.data,!s){a.next=4;break}return this.$toastr.error("","Assine o local informado"),a.abrupt("return");case 4:return a.next=6,this.$loadImageAsync(e,{maxWidth:1280,maxHeight:720,canvas:!0,orientation:!0});case 6:r=a.sent,i=n["a"].trimTransparentBackground(r),this.assinatura=i.toDataURL("image/png"),this.$jquery(this.$refs.coletor).modal("hide");case 10:case"end":return a.stop()}}),a,this)})));function t(){return a.apply(this,arguments)}return t}(),inserirImagem:function(){this.$store.state.mobile?this.$jquery(this.$refs["capturar-imagem"]).modal("show"):this.$refs.file.click()},capturarImagem_Mobile:function(){var a=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=function(t){a.$loadImage("data:image/jpeg;base64,"+t,(function(t){a.rasterizacao_img_original=t.toDataURL("image/png"),a.$jquery(a.$refs.rasterizador).modal("show"),a.rasterizarImagem()}),{maxWidth:1920,maxHeight:1080,orientation:!0,canvas:!0})},e=function(t){"No Image Selected"!==t&&a.$toastr.error(t,"Erro de captura")},r={quality:50,destinationType:Camera.DestinationType.DATA_URL,sourceType:t?Camera.PictureSourceType.PHOTOLIBRARY:Camera.PictureSourceType.CAMERA,encodingType:Camera.EncodingType.JPEG,mediaType:Camera.MediaType.PICTURE,correctOrientation:!0,allowEdit:!0,targetWidth:1920,targetHeight:1080,saveToPhotoAlbum:!1};navigator.camera.getPicture(s,e,r)},onInput:function(){var a=Object(i["a"])(regeneratorRuntime.mark((function a(){var t,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0!==this.$refs.file.files.length){a.next=3;break}return this.$toastr.warning("Nenhum arquivo selecionado"),a.abrupt("return");case 3:return t=this.$refs.file.files[0],this.$refs.file.value="",a.next=7,this.$loadImageAsync(t,{maxWidth:1920,maxHeight:1080,canvas:!0,orientation:!0});case 7:s=a.sent,this.rasterizacao_img_original=s.toDataURL("image/png"),this.$jquery(this.$refs.rasterizador).modal("show"),this.rasterizarImagem();case 11:case"end":return a.stop()}}),a,this)})));function t(){return a.apply(this,arguments)}return t}(),confirmarAssinaturaUpada:function(){this.assinatura=this.rasterizacao_img,this.$jquery(this.$refs.rasterizador).modal("hide")},rasterizarImagem:function(){var a=Object(i["a"])(regeneratorRuntime.mark((function a(){var t,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,this.$loadImageAsync(this.rasterizacao_img_original,{maxWidth:1280,maxHeight:720,canvas:!0,orientation:!0});case 2:t=a.sent,s=10*Math.abs(this.rasterizacao_level),t=n["a"].removerCorDeFundo(t,[s,s,s]),t=n["a"].trimTransparentBackground(t),this.rasterizacao_img=t.toDataURL("image/png");case 7:case"end":return a.stop()}}),a,this)})));function t(){return a.apply(this,arguments)}return t}(),confirmarFinalizacao:function(){this.$jquery(this.$refs.confirm).modal("show")},finalizar:function(){this.$jquery(this.$refs.confirm).modal("hide"),this.assinatura?this.$emit("finalizado",this.assinatura):this.$toastr.error("Não foi possível reconhecer a assinatura")}},watch:{rasterizacao_level:function(){this.rasterizarImagem()}},created:function(){this.assinatura=!!this.$store.state.assinatura&&null}},c=o,l=s("2877"),u=Object(l["a"])(c,e,r,!1,null,"7eec7c79",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0d6e56.04060d05.js.map