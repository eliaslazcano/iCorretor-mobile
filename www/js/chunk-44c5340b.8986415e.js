(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44c5340b"],{"39a0":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{ref:"recad-container",staticClass:"container pb-3"},[e("div",{staticClass:"indicadores"},[e("router-link",{attrs:{to:"/recadpj/form"}},[t._v("1")]),e("div",{staticClass:"divisor"}),e("router-link",{attrs:{to:"/recadpj/form/2"}},[t._v("2")]),e("div",{staticClass:"divisor"}),e("router-link",{attrs:{to:"/recadpj/form/3"}},[t._v("3")]),e("div",{staticClass:"divisor"}),e("router-link",{attrs:{to:"/recadpj/form/4"}},[t._v("4")])],1),e("transition",{attrs:{mode:"out-in",name:"fade"},on:{"after-leave":function(a){t.$jquery(t.$refs["recad-container"]).scrollTop()}}},[e("router-view",{attrs:{empresa:t.empresa},on:{recadastrar:t.confirmarDados},model:{value:t.dados,callback:function(a){t.dados=a},expression:"dados"}})],1)],1)},o=[],s=(e("ac4d"),e("8a81"),e("ac6a"),e("96cf"),e("3b8d")),i=e("c5e4"),n={name:"RecadPj",data:function(){return{dados:{}}},methods:{confirmarDados:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(JSON.stringify(this.dados)),t.prev=1,t.next=4,this.submit();case 4:return t.prev=4,this.$router.push("/"),t.finish(4);case 7:case"end":return t.stop()}}),t,this,[[1,,4,7]])})));function a(){return t.apply(this,arguments)}return a}(),submit:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var a,e,r,o,s,n,c,p,d,u,h=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={Token:i["a"].getCofeciToken(this.$store.getters.regional),CPFCNPJ:this.empresa.cnpj,CodigoInscricao:this.empresa.creci,IdTipoInscricao:this.empresa.secundaria?2:1,IdCategoriaInscricao:1,Nome:this.dados.nome.toUpperCase(),NomeFantasia:this.dados.fantasia.toUpperCase(),DataInscricao:this.empresa.data_inscricao,IdTipoEmpresa:this.converteTipoEmpresa(this.dados.tipo),MatrizFilial:1===this.dados.matriz?"M":"F",InscricaoJuntaComercial:this.dados.junta,DataInscricaoJuntaComercial:this.dados.juntaData,NumeroAlteracaoContratual:parseInt(this.dados.altContrato),DataAlteracaoContratual:this.dados.altContratoData,ValorCapitalSocial:this.dados.capital,Situacao:1===this.empresa.situacao?"A":"I",DebitoCreci:this.empresa.debito?"S":"N",Processo:"N"},e={Token:i["a"].getCofeciToken(this.$store.getters.regional),CodigoInscricao:this.empresa.creci,CodigoInscricaoR:this.$store.state.creci,IdCategoriaInscricao:1,IdCategoriaInscricaoR:1,ValorQuota:0,IdAtividade:1,AtivoInativo:"A"},r=this.dados.socios.map((function(t){return{Token:i["a"].getCofeciToken(h.$store.getters.regional),CodigoInscricao:h.empresa.creci,IdCategoriaInscricao:1,CPFCNPJ:t.cpf,Nome:t.nome,ValorQuota:t.cota,AtivoInativo:"A"}})),this.$store.state.homologacao&&(a.homologacao=!0,e.homologacao=!0),o=new FormData,o.append("gravarempresa",JSON.stringify(a)),o.append("gravarrt",JSON.stringify(e)),o.append("gravarsocios",JSON.stringify(r)),t.prev=8,this.$store.commit("setLoading","Registrando no COFECI"),t.prev=10,t.next=13,this.$http.cofeciApi.post("/gravarempresa.php",a);case 13:return t.next=15,this.$http.cofeciApi.post("/gravarresponsaveltecnico.php",e);case 15:if(!r.length){t.next=43;break}s=!0,n=!1,c=void 0,t.prev=19,p=r[Symbol.iterator]();case 21:if(s=(d=p.next()).done){t.next=29;break}return u=d.value,this.$store.state.homologacao&&(u.homologacao=!0),t.next=26,this.$http.cofeciApi.post("/gravarsocio.php",u);case 26:s=!0,t.next=21;break;case 29:t.next=35;break;case 31:t.prev=31,t.t0=t["catch"](19),n=!0,c=t.t0;case 35:t.prev=35,t.prev=36,s||null==p.return||p.return();case 38:if(t.prev=38,!n){t.next=41;break}throw c;case 41:return t.finish(38);case 42:return t.finish(35);case 43:t.next=50;break;case 45:throw t.prev=45,t.t1=t["catch"](10),o.append("falha",JSON.stringify(t.t1)),t.t1&&t.t1.data&&t.t1.data.Mensagem?this.$toastr.warning(t.t1.data.Mensagem,"Aviso do COFECI"):this.$toastr.error("Falha ao registrar no COFECI"),new Error("Erro na API COFECI");case 50:if(this.$store.state.homologacao){t.next=60;break}this.$store.commit("setLoading","Registrando no CRECI"),t.prev=52,t.next=60;break;case 55:throw t.prev=55,t.t2=t["catch"](52),o.append("falha",JSON.stringify(t.t2)),this.$toastr.error("Falha ao registrar no CRECI"),new Error("Erro na API CRECI");case 60:return t.prev=60,this.$store.commit("setLoading",!1),this.$http.axios.post(this.$http.appApi.defaults.baseURL+"/recad/registrar_pj.php",o,{headers:{Authorization:this.$store.state.token}}),t.finish(60);case 64:case"end":return t.stop()}}),t,this,[[8,,60,64],[10,45],[19,31,35,43],[36,,38,42],[52,55]])})));function a(){return t.apply(this,arguments)}return a}(),converteTipoEmpresa:function(t){switch(t){case 6:return 4;case 7:return 5;case 8:return 1;case 16:return 2;default:return null}}},computed:{empresa:function(){return this.$route.params.empresa?this.$route.params.empresa:null}},created:function(){this.empresa||(this.$toastr.info("Selecione a empresa"),this.$router.push({name:"recadpj-empresas"}))}},c=n,p=(e("67cd"),e("2877")),d=Object(p["a"])(c,r,o,!1,null,"e37d6b3e",null);a["default"]=d.exports},"67cd":function(t,a,e){"use strict";var r=e("fc7e"),o=e.n(r);o.a},fc7e:function(t,a,e){}}]);
//# sourceMappingURL=chunk-44c5340b.8986415e.js.map