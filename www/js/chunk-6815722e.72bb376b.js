(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6815722e"],{"2e14":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fill-height"},[a("app-bar",{attrs:{title:"Pedidos de CARP físico"},scopedSlots:e._u([{key:"append",fn:function(){return[a("v-btn",{attrs:{icon:"",to:"/utilidades",replace:""}},[a("v-icon",[e._v("mdi-arrow-left")])],1)]},proxy:!0}])}),a("async-container",{attrs:{loading:e.loading}},[a("v-container",[a("v-card",{attrs:{dark:e.$store.state.dark}},[a("v-card-title",[e._v("Cartões solicitados:")]),a("v-data-table",{attrs:{headers:e.headers,items:e.items,"sort-by":"exercicio","sort-desc":"","no-data-text":"Nenhum cartão protocolado"},scopedSlots:e._u([{key:"item.data_registro",fn:function(t){var a=t.item;return[e._v(e._s(e.parseDate(a.data_registro)))]}},{key:"item.entrega",fn:function(t){var r=t.item;return[0===r.entrega?a("span",[e._v("Sede de Campo Grande")]):1===r.entrega?a("span",[e._v("Subsede de Dourados")]):2===r.entrega?a("span",[e._v("Subsede de Três Lagoas")]):3===r.entrega?a("span",[e._v("Envio por correio")]):a("span",[e._v("Desconhecido...")])]}},{key:"item.status",fn:function(t){var r=t.item;return[0===r.status?a("v-chip",{attrs:{color:"error",label:"",small:""}},[e._v("Em confecção")]):1===r.status?a("v-chip",{attrs:{color:"primary",label:"",small:""}},[e._v("Pronto")]):2===r.status?a("v-chip",{attrs:{color:"error",label:"",small:""}},[e._v("Indeferido")]):3===r.status?a("v-chip",{attrs:{color:"success",label:"",small:""}},[e._v("Enviado")]):4===r.status?a("v-chip",{attrs:{color:"success",label:"",small:""}},[e._v("Retirado")]):a("v-chip",[e._v("Desconhecido...")])]}}])})],1),a("v-btn",{staticClass:"mt-3 mb-7",attrs:{block:"",color:"primary",loading:e.loadingAddCarp},on:{click:e.exibirFormPedirCarp}},[a("v-icon",{staticClass:"mr-1"},[e._v("mdi-plus-circle")]),e._v("Solicitar ")],1)],1)],1),a("v-dialog",{attrs:{width:"420","max-width":"94%",persistent:""},model:{value:e.dialogPedirCarp,callback:function(t){e.dialogPedirCarp=t},expression:"dialogPedirCarp"}},[a("v-card",[a("v-card-title",[e._v(" Solicitar cartão "),a("v-spacer"),a("v-icon",{on:{click:function(t){e.dialogPedirCarp=!1}}},[e._v("mdi-close")])],1),a("v-divider"),a("v-card-text",{staticClass:"py-8"},[a("v-select",{attrs:{label:"Local de retirada",items:e.iptLocalRetiradaItemsSmart,"hide-details":"",outlined:""},model:{value:e.iptLocalRetirada,callback:function(t){e.iptLocalRetirada=t},expression:"iptLocalRetirada"}})],1),a("v-card-actions",{staticClass:"justify-center"},[a("v-btn",{attrs:{color:"primary",loading:e.loadingAddCarp},on:{click:e.registrarCarp}},[e._v("Confirmar")]),a("v-btn",{attrs:{color:"primary",disabled:e.loadingAddCarp,outlined:""},on:{click:function(t){e.dialogPedirCarp=!1}}},[e._v("Cancelar")])],1)],1)],1)],1)},n=[],i=a("1da1"),o=(a("4de4"),a("96cf"),a("ae5b")),s=a("d4ec"),c=a("bee2"),l=a("ade3"),d=(a("d3b7"),a("25f0"),a("be3b")),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(s["a"])(this,e),Object(l["a"])(this,"http",Object(d["b"])()),t&&(this.http=Object(d["a"])())}return Object(c["a"])(e,[{key:"getCarps",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.http.get("crecims/carp?cpf="+t);case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"validarPodePedirCarp",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new FormData,a.append("cpf",t),e.next=4,this.http.patch("crecims/carp",a);case 4:return r=e.sent,n=r.data,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"insertCarp",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=new FormData,r.append("cpf",t),r.append("local",a.toString()),e.next=5,this.http.post("crecims/carp",r);case 5:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()}]),e}(),p=a("dd38"),v=a("c1df"),f=a.n(v),m={name:"CrecimsCarp",components:{AsyncContainer:o["a"],AppBar:p["a"]},data:function(){return{loading:!0,headers:[{value:"exercicio",text:"Exercício"},{value:"data_registro",text:"Data do pedido"},{value:"entrega",text:"Local de retirada"},{value:"status",text:"Situação"}],items:[],webclient:new u,dialogPedirCarp:!1,iptLocalRetirada:0,iptLocalRetiradaItems:[{value:0,text:"Sede de Campo Grande"},{value:1,text:"Subsede de Dourados"},{value:2,text:"Subsede de Três Lagoas"},{value:3,text:"Enviar por correio"}],loadingAddCarp:!1,aptoCorreio:!1}},methods:{loadData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.webclient.getCarps(e.$store.getters["session/payload"].cpf);case 3:e.items=t.sent,t.next=11;break;case 6:return t.prev=6,t.t0=t["catch"](0),console.log(t.t0),t.next=11,e.$router.push("/utilidades");case 11:return t.prev=11,e.loading=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,6,11,14]])})))()},parseDate:function(e){return f()(e).format("DD/MM/YYYY HH:mm")},exibirFormPedirCarp:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loadingAddCarp=!0,t.prev=1,t.next=4,e.webclient.validarPodePedirCarp(e.$store.getters["session/payload"].cpf);case 4:e.aptoCorreio=t.sent,e.dialogPedirCarp=!0;case 6:return t.prev=6,e.loadingAddCarp=!1,t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[1,,6,9]])})))()},registrarCarp:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loadingAddCarp=!0,t.prev=1,t.next=4,e.webclient.insertCarp(e.$store.getters["session/payload"].cpf,e.iptLocalRetirada);case 4:return t.next=6,e.loadData();case 6:e.dialogPedirCarp=!1;case 7:return t.prev=7,e.loadingAddCarp=!1,t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[1,,7,10]])})))()}},computed:{iptLocalRetiradaItemsSmart:function(){return this.aptoCorreio?this.iptLocalRetiradaItems:this.iptLocalRetiradaItems.filter((function(e){return 3!==e.value}))}},created:function(){this.loadData()}},g=m,h=a("2877"),b=Object(h["a"])(g,r,n,!1,null,"1536a4ff",null);t["default"]=b.exports},ae5b:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"d-flex flex-column",staticStyle:{"min-height":"100%"},attrs:{fluid:e.fluid}},[a("transition",{attrs:{mode:"out-in",name:e.loading?e.transition:e.spinnerTransition,appear:e.appear,"leave-class":e.loading?e.transition+"-leave":e.spinnerTransition+"-leave","leave-to-class":e.loading?e.transition+"-leave-to":e.spinnerTransition+"-leave-to","leave-active-class":e.loading?e.transition+"-leave-active":e.spinnerTransition+"-leave-active","enter-class":e.loading?e.spinnerTransition+"-enter":e.transition+"-enter","enter-to-class":e.loading?e.spinnerTransition+"-enter-to":e.transition+"-enter-to","enter-active-class":e.loading?e.spinnerTransition+"-enter-active":e.transition+"-enter-active"},on:{"after-leave":function(t){return e.$emit("after-leave",e.loading)},"after-enter":function(t){return e.$emit("after-enter",e.loading)}}},[e.loading?a("div",{key:0,staticClass:"d-flex flex-column justify-center align-center grow",staticStyle:{height:"100%"}},[a("v-progress-circular",{attrs:{indeterminate:"",color:e.color}}),e.text?a("p",{staticClass:"mb-0 mt-2 grey--text text--darken-1"},[e._v(e._s(e.text))]):e._e()],1):a("div",{key:1},[e._t("default")],2)])],1)},n=[],i={name:"AsyncContainer",props:{loading:{type:Boolean,default:!1},color:{type:String,default:"blue"},transition:{type:String,default:"scroll-x-transition"},spinnerTransition:{type:String,default:"fade-transition"},fluid:{type:Boolean,default:!1},appear:{type:Boolean,default:!0},text:{type:String,default:""}}},o=i,s=a("2877"),c=Object(s["a"])(o,r,n,!1,null,null,null);t["a"]=c.exports}}]);
//# sourceMappingURL=chunk-6815722e.72bb376b.js.map