(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58ebb278"],{"2d35":function(e,a,t){},"4af1":function(e,a,t){"use strict";var o=t("2d35"),r=t.n(o);r.a},"9ade":function(e,a,t){"use strict";t.r(a);var o=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{ref:"recad-container",staticClass:"container"},[t("div",{staticClass:"indicadores"},[t("router-link",{attrs:{to:{name:"recad-form-dadospessoais"}}},[e._v("1")]),t("div",{staticClass:"divisor"}),t("router-link",{attrs:{to:{name:"recad-form-documentacao"}}},[e._v("2")]),t("div",{staticClass:"divisor"}),t("router-link",{attrs:{to:{name:"recad-form-endereco"}}},[e._v("3")]),t("div",{staticClass:"divisor"}),t("router-link",{attrs:{to:{name:"recad-form-contato"}}},[e._v("4")]),t("div",{staticClass:"divisor"}),t("router-link",{attrs:{to:{name:"recad-form-foto"}}},[e._v("5")]),t("div",{staticClass:"divisor"}),t("router-link",{attrs:{to:{name:"recad-form-assinatura"}}},[e._v("6")])],1),t("transition",{attrs:{mode:"out-in",name:"fade"},on:{"after-leave":function(a){e.$jquery(e.$refs["recad-container"]).scrollTop()}}},[t("router-view",{on:{finalizado:e.recadastrar}})],1),t("div",{ref:"aviso-legal",staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog","data-backdrop":"static"}},[e._m(0)])],1)},r=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title"},[e._v("Atenção")]),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])]),t("div",{staticClass:"modal-body"},[t("p",{staticClass:"text-danger text-center mb-2 mr-3"},[t("i",{staticClass:"fas fa-exclamation-triangle fa-3x"})]),t("p",{staticClass:"text-justify mb-0"},[e._v("Na finalidade de evitar crimes como "),t("span",{staticClass:"text-danger",staticStyle:{"font-weight":"600"}},[e._v("Falsidade ideológica")]),e._v(" e "),t("span",{staticClass:"text-danger",staticStyle:{"font-weight":"600"}},[e._v("Falsa identidade")]),t("span",{staticClass:"text-muted font-italic"},[e._v(" (sob o cartão de regularidade)")]),e._v(", algumas informações são apenas para conferência. Se desejar corrigir alguma informação bloqueada, compareça ao CRECI com um documento que comprove a autenticidade da sua informação.")])]),t("div",{staticClass:"modal-footer justify-content-center"},[t("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Entendi")])])])])}],i=(t("6b54"),t("28a5"),t("96cf"),t("3b8d")),s=t("c5e4"),n=t("0e28"),c=t("c762"),d=t("db04"),p={name:"Home",created:function(){if(!this.podeRecadastrar)return this.$toastr.error("Seu regional não tem suporte para o recadastramento"),void this.$router.push({name:"home"});this.$store.commit("setControls",!1)},mounted:function(){var e=this;this.$sleep(1e3).then((function(){return e.$jquery(e.$refs["aviso-legal"]).modal("show")}))},destroyed:function(){this.$store.commit("setControls",!0),this.destruirCache()},methods:{recadastrar:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a){var t,o,r,i,p,l,m,u,h,g,f,v,C,b,$,_,I,x,S=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s["a"].utilizaConselhoNet(this.$store.getters.regional)){e.next=4;break}return this.$toastr.error("Seu regional não possui compatibilidade com a ferramenta"),this.$router.push({name:"home"}),e.abrupt("return");case 4:t=JSON.parse(sessionStorage.getItem("recad_dadospessoais")),o=JSON.parse(sessionStorage.getItem("recad_documentacao")),r=JSON.parse(sessionStorage.getItem("recad_endereco")),i=JSON.parse(sessionStorage.getItem("recad_contato")),p=JSON.parse(sessionStorage.getItem("recad_foto")),l=s["a"].getCofeciToken(this.$store.getters.regional),m=1===t.sexo?"M":2===t.sexo?"F":"O",e.t0=t.tiposanguineo,e.next=2===e.t0?14:3===e.t0?17:4===e.t0?20:5===e.t0?23:6===e.t0?26:7===e.t0?29:8===e.t0?32:9===e.t0?35:38;break;case 14:return u="A",h="P",e.abrupt("break",40);case 17:return u="A",h="N",e.abrupt("break",40);case 20:return u="B",h="P",e.abrupt("break",40);case 23:return u="B",h="N",e.abrupt("break",40);case 26:return u="AB",h="P",e.abrupt("break",40);case 29:return u="AB",h="N",e.abrupt("break",40);case 32:return u="O",h="P",e.abrupt("break",40);case 35:return u="O",h="N",e.abrupt("break",40);case 38:u="NS",h="NS";case 40:return g={Token:l,CPFCNPJ:o.cpf,CodigoInscricao:this.$store.state.creci,IdTipoInscricao:t.tipoinscricao,IdCategoriaInscricao:t.categoriainscricao,IdEstadoCivil:t.estadocivil,IdFormacao:t.formacao+1,IdEscolaridade:t.escolaridade,NomePai:t.pai,NomeMae:t.mae,Sexo:m,Estrangeiro:"N",Nacionalidade:t.nacionalidade,DataNascimento:n["a"].date_BRparaSQL(t.datanascimento),Naturalidade:t.naturalidade,UFNaturalidade:t.ufnaturalidade,Reservista:t.reservista?t.reservista:"0",RegistroIdentidade:o.rg,OrgaoEmissor:o.rgemissor,UFOrgaoEmissor:o.rgufemissor,DataEmissaoRG:n["a"].date_BRparaSQL(o.rgdataemissao),TituloDeEleitor:o.tituloeleitoral,UFTituloDeEleitor:"",Zona:o.zonaeleitoral,Secao:o.secaoeleitoral,TipoSanguineo:u,FatorRh:h,Doador:1===t.doador?"S":"N",Nome:t.nomecompleto,NomeFantasia:t.npa,Situacao:1===this.$store.state.situacao?"A":"I",DataInscricao:n["a"].date_BRparaSQL(t.datainscricao),DebitoCreci:this.$store.state.anuidade_absoluta?"N":"S",Processo:"N"},f={Token:l,CodigoInscricao:this.$store.state.creci,IdCategoriaInscricao:t.categoriainscricao,IdTipoEndereco:1,IdReferencia:1,Cep:r.endereco_residencial.cep,Logradouro:r.endereco_residencial.logradouro,Numero:r.endereco_residencial.numero,Complemento:r.endereco_residencial.complemento,Bairro:r.endereco_residencial.bairro,Cidade:r.endereco_residencial.cidade,UF:r.endereco_residencial.uf,Correspondencia:1===r.favorito?"S":"N"},v={Token:l,CodigoInscricao:this.$store.state.creci,IdCategoriaInscricao:t.categoriainscricao,EmailPagina:i.email1},C={Token:l,CodigoInscricao:this.$store.state.creci,IdCategoriaInscricao:t.categoriainscricao,Foto:p.split("base64,")[1],Assinatura:a.split("base64,")[1]},b=new FormData,b.append("context",JSON.stringify(g)),e.prev=46,this.$store.commit("setLoading","Registrando no COFECI"),e.prev=48,this.$store.state.homologacao&&(g.homologacao=!0),e.next=52,this.$http.cofeciApi.post("/gravarcorretor.php",JSON.stringify(g));case 52:return e.next=54,this.$http.axios.post(this.$http.cofeciApi.defaults.baseURL+"/excluirtodosemails.php",JSON.stringify({Token:l,CodigoInscricao:this.$store.state.creci,IdCategoriaInscricao:t.categoriainscricao,Pessoa:"F"}));case 54:return e.next=56,this.$http.axios.post(this.$http.cofeciApi.defaults.baseURL+"/excluirtodostelefones.php",JSON.stringify({Token:l,CodigoInscricao:this.$store.state.creci,IdCategoriaInscricao:t.categoriainscricao,Pessoa:"F"}));case 56:return this.$store.state.homologacao&&(f.homologacao=!0),e.next=59,this.$http.cofeciApi.post("/gravarendereco.php",JSON.stringify(f));case 59:if(!r.endereco_comercial){e.next=64;break}return f={Token:l,CodigoInscricao:this.$store.state.creci,IdCategoriaInscricao:t.categoriainscricao,IdTipoEndereco:2,IdReferencia:4,Cep:r.endereco_comercial.cep,Logradouro:r.endereco_comercial.logradouro,Numero:r.endereco_comercial.numero,Complemento:r.endereco_comercial.complemento,Bairro:r.endereco_comercial.bairro,Cidade:r.endereco_comercial.cidade,UF:r.endereco_comercial.uf,Correspondencia:2===r.favorito?"S":"N"},this.$store.state.homologacao&&(f.homologacao=!0),e.next=64,this.$http.cofeciApi.post("/gravarendereco.php",JSON.stringify(f));case 64:return this.$store.state.homologacao&&(v.homologacao=!0),e.next=67,this.$http.cofeciApi.post("/gravaremail.php",JSON.stringify(v));case 67:if(!i.email2){e.next=71;break}return v.EmailPagina=i.email2,e.next=71,this.$http.cofeciApi.post("/gravaremail.php",JSON.stringify(v));case 71:if(!i.email3){e.next=75;break}return v.EmailPagina=i.email3,e.next=75,this.$http.cofeciApi.post("/gravaremail.php",JSON.stringify(v));case 75:return $=i.telefones.map((function(e){return S.$http.cofeciApi.post("/gravartelefone.php",JSON.stringify({Token:l,CodigoInscricao:S.$store.state.creci,IdCategoriaInscricao:t.categoriainscricao,IdTipoTelefone:e.tipo,DDD:e.numero.substr(0,2),Numero:e.numero.substr(2),homologacao:!!S.$store.state.homologacao||void 0}))})),e.next=78,this.$http.axios.all($);case 78:return this.$store.state.homologacao&&(C.homologacao=!0),e.next=81,this.$http.cofeciApi.post("/gravarfotoassinatura.php",JSON.stringify(C));case 81:return e.next=83,this.$http.cofeciApi.post("/recadastramento.php",JSON.stringify({Token:l,CodigoInscricao:this.$store.state.creci,IdCategoriaInscricao:t.categoriainscricao,homologacao:!!this.$store.state.homologacao||void 0}));case 83:return e.prev=83,_=new d["c"](o.cpf,this.$store.getters.regional,!0),e.next=87,_.updateDataValidade();case 87:e.next=92;break;case 89:e.prev=89,e.t1=e["catch"](83),console.log(e.t1);case 92:e.next=99;break;case 94:throw e.prev=94,e.t2=e["catch"](48),b.append("falha",JSON.stringify(e.t2)),e.t2.data.Mensagem?this.$toastr.warning(e.t2.data.Mensagem,"Aviso do COFECI"):this.$toastr.error("Falha ao registrar no COFECI"),new Error("Erro na API COFECI");case 99:if(this.$store.state.homologacao){e.next=181;break}this.$store.commit("setLoading","Registrando no CRECI"),I=null,e.t3=t.estadocivil,e.next=5===e.t3?105:6===e.t3?107:8===e.t3?109:111;break;case 105:return I=4,e.abrupt("break",112);case 107:return I=5,e.abrupt("break",112);case 109:return I=6,e.abrupt("break",112);case 111:I=t.estadocivil;case 112:return e.prev=112,x=new FormData,x.append("idregional",this.$store.getters.regional),x.append("cpf",o.cpf),x.append("nome",t.nomecompleto),x.append("estadocivil",I.toString()),x.append("formacao",2===t.formacao?5:1===t.formacao?2:t.formacao),x.append("pai",t.pai),x.append("mae",t.mae),x.append("sexo",t.sexo),x.append("nacionalidade",t.nacionalidade),x.append("naturalidade",t.naturalidade),x.append("ufnaturalidade",t.ufnaturalidade),x.append("datanascimento",n["a"].date_BRparaSQL(t.datanascimento)),t.reservista&&x.append("reservista",t.reservista),x.append("rgnumero",o.rg),x.append("rgemissor",o.rgemissor+"/"+o.rgufemissor),x.append("rgdataemissao",n["a"].date_BRparaSQL(o.rgdataemissao)),o.tituloeleitoral&&x.append("tituloeleitor",o.tituloeleitoral),o.zonaeleitoral&&x.append("zonaeleitoral",o.zonaeleitoral),o.secaoeleitoral&&x.append("secaoeleitoral",o.secaoeleitoral),x.append("doador",t.doador),x.append("email1",i.email1),x.append("email2",i.email2),x.append("email3",i.email3),e.next=139,this.$http.conselhoApi.post("/corretor/atualizar/ficha.php",x);case 139:return x=new FormData,x.append("idregional",this.$store.getters.regional),x.append("cpf",o.cpf),x.append("enderecoresidencial",JSON.stringify({cep:r.endereco_residencial.cep,uf:r.endereco_residencial.uf,cidade:r.endereco_residencial.cidade,bairro:r.endereco_residencial.bairro,logradouro:r.endereco_residencial.logradouro,complemento:r.endereco_residencial.complemento?r.endereco_residencial.numero+", "+r.endereco_residencial.complemento:r.endereco_residencial.numero})),r.endereco_comercial&&x.append("enderecocomercial",JSON.stringify({cep:r.endereco_comercial.cep,uf:r.endereco_comercial.uf,cidade:r.endereco_comercial.cidade,bairro:r.endereco_comercial.bairro,logradouro:r.endereco_comercial.logradouro,complemento:r.endereco_comercial.complemento?r.endereco_comercial.numero+", "+r.endereco_comercial.complemento:r.endereco_comercial.numero})),x.append("favorito",r.favorito),x.append("quem","9999"),e.next=148,this.$http.conselhoApi.post("/corretor/atualizar/endereco.php",x);case 148:return x=new FormData,x.append("idregional",this.$store.getters.regional),x.append("cpf",o.cpf),x.append("telefones",JSON.stringify(i.telefones)),x.append("quem","9999"),e.next=155,this.$http.conselhoApi.post("/corretor/atualizar/telefone.php",x);case 155:return x=new FormData,x.append("idregional",this.$store.getters.regional),x.append("cpf",o.cpf),x.append("imagem",c["a"].dataURItoBlob(p)),e.next=161,this.$http.conselhoApi.post("/corretor/atualizar/foto.php",x);case 161:return x=new FormData,x.append("idregional",this.$store.getters.regional),x.append("cpf",o.cpf),x.append("imagem",c["a"].dataURItoBlob(a)),e.next=167,this.$http.conselhoApi.post("/corretor/atualizar/assinatura.php",x);case 167:return x=new FormData,x.append("idregional",this.$store.getters.regional),x.append("cpf",o.cpf),x.append("idambiente","1"),e.next=173,this.$http.conselhoApi.post("/corretor/inserir/recadastramento.php",x);case 173:this.$toastr.success("Recadastramento registrado"),e.next=181;break;case 176:throw e.prev=176,e.t4=e["catch"](112),b.append("falha",JSON.stringify(e.t4)),this.$toastr.error("Falha ao registrar no CRECI"),new Error("Erro na API CRECI");case 181:return this.destruirCache(),this.$store.commit("setLoading","Atualizando sua conta"),e.prev=183,e.next=186,this.$store.dispatch("updateUserData");case 186:return e.prev=186,e.next=189,this.$router.push({name:"home"});case 189:return e.finish(186);case 190:return e.prev=190,this.$http.axios.post(this.$http.appApi.defaults.baseURL+"/recad/registrar.php",b,{headers:{Authorization:this.$store.state.token}}),this.$store.commit("setLoading",!1),e.finish(190);case 194:case"end":return e.stop()}}),e,this,[[46,,190,194],[48,94],[83,89],[112,176],[183,,186,190]])})));function a(a){return e.apply(this,arguments)}return a}(),destruirCache:function(){sessionStorage.removeItem("recad_dadospessoais"),sessionStorage.removeItem("recad_documentacao"),sessionStorage.removeItem("recad_endereco"),sessionStorage.removeItem("recad_contato"),sessionStorage.removeItem("recad_foto")}},computed:{podeRecadastrar:function(){return s["a"].utilizaConselhoNet(this.$store.getters.regional)}}},l=p,m=(t("4af1"),t("2877")),u=Object(m["a"])(l,o,r,!1,null,"2ee99ea0",null);a["default"]=u.exports}}]);
//# sourceMappingURL=chunk-58ebb278.d2e69692.js.map